var pagespeedutils={addHandler:function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,!1)}else{if(e.attachEvent){e.attachEvent("on"+t,n)}else{var r=e["on"+t];e["on"+t]=function(){n.call(this);r&&r.call(this)}}}}};window["pagespeed"]=window["pagespeed"]||{};var pagespeed=window["pagespeed"];pagespeed["deferJsNs"]={};var deferJsNs=pagespeed["deferJsNs"];deferJsNs.DeferJs=function(){this.queue_=[];this.logs=[];this.next_=0;this.dynamicInsertedScriptCount_=0;this.dynamicInsertedScript_=[];this.documentWriteHtml_="";this.eventListenersMap_={};this.jsMimeTypes=["application/ecmascript","application/javascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"];this.overrideDefaultImplementation_=true;this.origGetElementById_=document.getElementById;this.origGetElementsByTagName_=document.getElementsByTagName;this.origDocWrite_=document.write;this.origDocWriteln_=document.writeln;this.origDocOpen_=document.open;this.origDocClose_=document.close;this.origDocAddEventListener_=document.addEventListener;this.origWindowAddEventListener_=window.addEventListener;this.origDocAttachEvent_=document.attachEvent;this.origWindowAttachEvent_=window.attachEvent;this.origCreateElement_=document.createElement;this.state_=deferJsNs.DeferJs.STATES.NOT_STARTED;this.eventState_=deferJsNs.DeferJs.EVENT.NOT_STARTED;this.firstIncrementalRun_=true;this.lastIncrementalRun_=true;this.incrementalScriptsDoneCallback_=null;this.noDeferAsyncScriptsCount_=0;this.noDeferAsyncScripts_=[];this.psaScriptType_="";this.psaNotProcessed_="";this.optLastIndex_=-1};deferJsNs.DeferJs.isExperimentalMode=false;deferJsNs.DeferJs.STATES={NOT_STARTED:0,WAITING_FOR_NEXT_RUN:1,SCRIPTS_REGISTERED:2,SCRIPTS_EXECUTING:3,SYNC_SCRIPTS_DONE:4,WAITING_FOR_ONLOAD:5,SCRIPTS_DONE:6};deferJsNs.DeferJs.EVENT={NOT_STARTED:0,BEFORE_SCRIPTS:1,DOM_READY:2,LOAD:3,AFTER_SCRIPTS:4};deferJsNs.DeferJs.PRIORITY_PSA_NOT_PROCESSED="priority_frz_not_processed";deferJsNs.DeferJs.PSA_NOT_PROCESSED="frz_not_processed";deferJsNs.DeferJs.PSA_CURRENT_NODE="frz_current_node";deferJsNs.DeferJs.PSA_TO_BE_DELETED="frz_to_be_deleted";deferJsNs.DeferJs.PSA_SCRIPT_TYPE="text/frzjs";deferJsNs.DeferJs.PRIORITY_PSA_SCRIPT_TYPE="text/priorityfrzjs";deferJsNs.DeferJs.PSA_ORIG_TYPE="frz_orig_type";deferJsNs.DeferJs.PSA_ORIG_SRC="frz_orig_src";deferJsNs.DeferJs.PSA_ORIG_INDEX="orig_index";deferJsNs.DeferJs.PAGESPEED_ONLOAD="data-frz-onload";deferJsNs.DeferJs.prototype.log=function(e,t){if(this.logs){this.logs.push(""+e);if(t){this.logs.push(t);if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log("FRZ ERROR: "+e+t.message)}}}};deferJsNs.DeferJs.prototype.submitTask=function(e,t){var n=t?t:this.queue_.length;this.queue_.splice(n,0,e)};deferJsNs.DeferJs.prototype.globalEval=function(e,t){var n=this.cloneScriptNode(t);n.text=e;n.setAttribute("type","text/javascript");var r=this.getCurrentDomLocation();r.parentNode.insertBefore(n,r);return n};deferJsNs.DeferJs.prototype.createIdVars=function(){var e=document.getElementsByTagName("*");var t="";for(var n=0;n<e.length;n++){if(e[n].hasAttribute("id")){var r=e[n].getAttribute("id");if(r&&r.search(/[-:.]/)==-1&&r.search(/^[0-9]/)==-1){try{if(window[r]&&window[r].tagName){t+="var "+r+'=document.getElementById("'+r+'");'}}catch(i){this.log("Exception while evaluating.",i)}}}}if(t){var s=this.globalEval(t);s.setAttribute(deferJsNs.DeferJs.PSA_NOT_PROCESSED,"");s.setAttribute(deferJsNs.DeferJs.PRIORITY_PSA_NOT_PROCESSED,"")}};deferJsNs.DeferJs.prototype.attemptPrefetchOrQueue=function(e){if(this.isWebKit()){(new Image).src=e}};deferJsNs.DeferJs.prototype.addNode=function(e,t,n){var r=e.getAttribute(deferJsNs.DeferJs.PSA_ORIG_SRC)||e.getAttribute("src");if(r){if(n){this.attemptPrefetchOrQueue(r)}this.addUrl(r,e,t)}else{var i=e.innerHTML||e.textContent||e.data||"";this.addStr(i,e,t)}};deferJsNs.DeferJs.prototype.addStr=function(e,t,n){if(this.isFireFox()){this.addUrl("data:text/javascript,"+encodeURIComponent(e),t,n);return}this.logs.push("Add to queue str: "+e);var r=this;this.submitTask(function(){r.removeNotProcessedAttributeTillNode(t);var n=r.nextPsaJsNode();n.setAttribute(deferJsNs.DeferJs.PSA_CURRENT_NODE,"");try{r.globalEval(e,t)}catch(i){r.log("Exception while evaluating.",i)}r.log("Evaluated: "+e);r.runNext()},n)};deferJsNs.DeferJs.prototype["addStr"]=deferJsNs.DeferJs.prototype.addStr;deferJsNs.DeferJs.prototype.cloneScriptNode=function(e){var t=this.origCreateElement_.call(document,"script");if(e){for(var n=e.attributes,r=n.length,i=r-1;i>=0;--i){if(n[i].name!="type"&&n[i].name!="src"&&n[i].name!="async"&&n[i].name!="defer"&&n[i].name!=deferJsNs.DeferJs.PSA_ORIG_TYPE&&n[i].name!=deferJsNs.DeferJs.PSA_ORIG_SRC&&n[i].name!=deferJsNs.DeferJs.PSA_ORIG_INDEX&&n[i].name!=deferJsNs.DeferJs.PSA_CURRENT_NODE&&n[i].name!=this.psaNotProcessed_){t.setAttribute(n[i].name,n[i].value);e.removeAttribute(n[i].name)}}}return t};deferJsNs.DeferJs.prototype.scriptOnLoad=function(e){var t=this.origCreateElement_.call(document,"script");t.setAttribute("type","text/javascript");t.async=false;t.setAttribute(deferJsNs.DeferJs.PSA_TO_BE_DELETED,"");t.setAttribute(deferJsNs.DeferJs.PSA_NOT_PROCESSED,"");t.setAttribute(deferJsNs.DeferJs.PRIORITY_PSA_NOT_PROCESSED,"");var n=this;var r=function(){if(document.querySelector){var t=document.querySelector("["+deferJsNs.DeferJs.PSA_TO_BE_DELETED+"]");if(t){t.parentNode.removeChild(t)}}n.log("Executed: "+e);n.runNext()};deferJsNs.addOnload(t,r);pagespeedutils.addHandler(t,"error",r);t.src="data:text/javascript,"+encodeURIComponent("window.pagespeed.psatemp=0;");var i=this.getCurrentDomLocation();i.parentNode.insertBefore(t,i)};deferJsNs.DeferJs.prototype.addUrl=function(e,t,n){this.logs.push("Add to queue url: "+e);var r=this;this.submitTask(function(){r.removeNotProcessedAttributeTillNode(t);var n=r.cloneScriptNode(t);n.setAttribute("type","text/javascript");var i=true;if("async"in n){n.async=false}else if(n.readyState){i=false;var s=function(){if(n.readyState=="complete"||n.readyState=="loaded"){n.onreadystatechange=null;r.log("Executed: "+e);r.runNext()}};pagespeedutils.addHandler(n,"readystatechange",s)}n.setAttribute("src",e);var o=t.innerHTML||t.textContent||t.data;if(o){n.appendChild(document.createTextNode(o))}var u=r.nextPsaJsNode();u.setAttribute(deferJsNs.DeferJs.PSA_CURRENT_NODE,"");u.parentNode.insertBefore(n,u);if(i){r.scriptOnLoad(e)}},n)};deferJsNs.DeferJs.prototype["addUrl"]=deferJsNs.DeferJs.prototype.addUrl;deferJsNs.DeferJs.prototype.removeNotProcessedAttributeTillNode=function(e){if(document.querySelectorAll&&!(this.getIEVersion()<=8)){var t=document.querySelectorAll("["+this.psaNotProcessed_+"]");for(var n=0;n<t.length;n++){var r=t.item(n);if(r==e){return}if(r.getAttribute("type")!=this.psaScriptType_){r.removeAttribute(this.psaNotProcessed_)}}}};deferJsNs.DeferJs.prototype.setNotProcessedAttributeForNodes=function(){var e=this.origGetElementsByTagName_.call(document,"*");for(var t=0;t<e.length;t++){var n=e.item(t);n.setAttribute(this.psaNotProcessed_,"")}};deferJsNs.DeferJs.prototype.nextPsaJsNode=function(){var e=null;if(document.querySelector){e=document.querySelector('[type="'+this.psaScriptType_+'"]')}return e};deferJsNs.DeferJs.prototype.getCurrentDomLocation=function(){var e;if(document.querySelector){e=document.querySelector("["+deferJsNs.DeferJs.PSA_CURRENT_NODE+"]")}return e||this.origGetElementsByTagName_.call(document,"psanode")[0]};deferJsNs.DeferJs.prototype.removeCurrentDomLocation=function(){var e=this.getCurrentDomLocation();if(e.nodeName=="SCRIPT"){e.parentNode.removeChild(e)}};deferJsNs.DeferJs.prototype.onComplete=function(){if(this.state_>=deferJsNs.DeferJs.STATES.WAITING_FOR_ONLOAD){return}if(this.lastIncrementalRun_&&this.isLowPriorityDeferJs()){if(this.getIEVersion()&&document.documentElement["originalDoScroll"]){document.documentElement.doScroll=document.documentElement["originalDoScroll"]}if(Object.defineProperty){delete document["readyState"]}if(this.getIEVersion()){if(Object.defineProperty){delete document["all"]}}}this.overrideDefaultImplementation_=false;if(this.lastIncrementalRun_){this.state_=deferJsNs.DeferJs.STATES.WAITING_FOR_ONLOAD;if(this.isLowPriorityDeferJs()){var e=this;if(document.readyState!="complete"){deferJsNs.addOnload(window,function(){e.fireOnload()})}else{if(document.onreadystatechange){this.exec(document.onreadystatechange,document)}if(window.onload){psaAddEventListener(window,"onload",window.onload);window.onload=null}this.fireOnload()}}else{this.highPriorityFinalize()}}else{this.state_=deferJsNs.DeferJs.STATES.WAITING_FOR_NEXT_RUN;this.firstIncrementalRun_=false;if(this.incrementalScriptsDoneCallback_&&this.isLowPriorityDeferJs()){pagespeed.deferJs=pagespeed.highPriorityDeferJs;pagespeed["deferJs"]=pagespeed.highPriorityDeferJs;this.exec(this.incrementalScriptsDoneCallback_);this.incrementalScriptsDoneCallback_=null}else{this.highPriorityFinalize()}}};deferJsNs.DeferJs.prototype.fireOnload=function(){if(this.isLowPriorityDeferJs()){this.addDeferredOnloadListeners();pagespeed.highPriorityDeferJs.fireOnload()}this.fireEvent(deferJsNs.DeferJs.EVENT.LOAD);if(this.isLowPriorityDeferJs()){var e=document.body.getElementsByTagName("psanode");for(var t=e.length-1;t>=0;t--){document.body.removeChild(e[t])}var n=document.body.getElementsByClassName("psa_prefetch_container");for(var t=n.length-1;t>=0;t--){n[t].parentNode.removeChild(n[t])}}this.state_=deferJsNs.DeferJs.STATES.SCRIPTS_DONE;this.fireEvent(deferJsNs.DeferJs.EVENT.AFTER_SCRIPTS)};deferJsNs.DeferJs.prototype.highPriorityFinalize=function(){var e=this;window.setTimeout(function(){pagespeed.deferJs=pagespeed.lowPriorityDeferJs;pagespeed["deferJs"]=pagespeed.lowPriorityDeferJs;if(e.incrementalScriptsDoneCallback_){pagespeed.deferJs.registerScriptTags(e.incrementalScriptsDoneCallback_,e.optLastIndex_);e.incrementalScriptsDoneCallback_=null}else{pagespeed.deferJs.registerScriptTags()}pagespeed.deferJs.execute()},0)};deferJsNs.DeferJs.prototype.checkNodeInDom=function(e){while(e=e.parentNode){if(e==document){return true}}return false};deferJsNs.DeferJs.prototype.getNumScriptsWithNoOnload=function(e){var t=0;var n=e.length;for(var r=0;r<n;++r){var i=e[r];var s=i.parentNode;var o=i.src;var u=i.textContent;if(this.getIEVersion()>8&&(!s||o==""&&u=="")||!this.getIEVersion()&&(!this.checkNodeInDom(i)||o=="")){t++}}return t};deferJsNs.DeferJs.prototype.canCallOnComplete=function(){if(this.state_!=deferJsNs.DeferJs.STATES.SYNC_SCRIPTS_DONE){return false}var e=0;if(this.dynamicInsertedScriptCount_!=0){e=this.getNumScriptsWithNoOnload(this.dynamicInsertedScript_)}if(this.dynamicInsertedScriptCount_==e){return true}return false};deferJsNs.DeferJs.prototype.scriptsAreDone=function(){return this.state_===deferJsNs.DeferJs.STATES.SCRIPTS_DONE};deferJsNs.DeferJs.prototype["scriptsAreDone"]=deferJsNs.DeferJs.prototype.scriptsAreDone;deferJsNs.DeferJs.prototype.runNext=function(){this.handlePendingDocumentWrites();this.removeCurrentDomLocation();if(this.next_<this.queue_.length){this.next_++;this.queue_[this.next_-1].call(window)}else{if(this.lastIncrementalRun_){this.state_=deferJsNs.DeferJs.STATES.SYNC_SCRIPTS_DONE;this.removeNotProcessedAttributeTillNode();this.fireEvent(deferJsNs.DeferJs.EVENT.DOM_READY);if(this.canCallOnComplete()){this.onComplete()}}else{this.onComplete()}}};deferJsNs.DeferJs.prototype.nodeListToArray=function(e){var t=[];var n=e.length;for(var r=0;r<n;++r){t.push(e.item(r))}return t};deferJsNs.DeferJs.prototype.setUp=function(){var e=this;if(this.firstIncrementalRun_&&!this.isLowPriorityDeferJs()){var t=document.createElement("psanode");t.setAttribute("psa_dw_target","true");document.body.appendChild(t);if(this.getIEVersion()){this.createIdVars()}if(Object.defineProperty){try{var n={configurable:true};n.get=function(){return e.state_>=deferJsNs.DeferJs.STATES.SYNC_SCRIPTS_DONE?"interactive":"loading"};Object.defineProperty(document,"readyState",n)}catch(r){this.log("Exception while overriding document.readyState.",r)}}if(this.getIEVersion()){document.documentElement["originalDoScroll"]=document.documentElement.doScroll;document.documentElement.doScroll=function(){throw"psa exception"};if(Object.defineProperty){try{var n={configurable:true};n.get=function(){return undefined};Object.defineProperty(document,"all",n)}catch(r){this.log("Exception while overriding document.all.",r)}}}}this.overrideAddEventListeners();document.writeln=function(t){e.writeHtml(t+"\n")};document.write=function(t){e.writeHtml(t)};document.open=function(){if(!e.overrideDefaultImplementation_){e.origDocOpen_.call(document)}};document.close=function(){if(!e.overrideDefaultImplementation_){e.origDocClose_.call(document)}};document.getElementById=function(t){e.handlePendingDocumentWrites();var n=e.origGetElementById_.call(document,t);return n==null||n.hasAttribute(e.psaNotProcessed_)?null:n};if(document.querySelectorAll&&!(e.getIEVersion()<=8)){document.getElementsByTagName=function(t){if(e.overrideDefaultImplementation_){try{return document.querySelectorAll(t+":not(["+e.psaNotProcessed_+"])")}catch(n){}}return e.origGetElementsByTagName_.call(document,t)}}document.createElement=function(t){var n=e.origCreateElement_.call(document,t);if(e.overrideDefaultImplementation_&&t.toLowerCase()=="script"){e.dynamicInsertedScript_.push(n);e.dynamicInsertedScriptCount_++;var r=function(){e.dynamicInsertedScriptCount_--;var t=e.dynamicInsertedScript_.indexOf(this);if(t!=-1){e.dynamicInsertedScript_.splice(t,1);if(e.canCallOnComplete()){e.onComplete()}}};deferJsNs.addOnload(n,r);pagespeedutils.addHandler(n,"error",r)}return n}};deferJsNs.DeferJs.prototype.execute=function(){if(this.state_!=deferJsNs.DeferJs.STATES.SCRIPTS_REGISTERED){return}var e=0;if(this.noDeferAsyncScriptsCount_!=0){e=this.getNumScriptsWithNoOnload(this.noDeferAsyncScripts_)}if(this.noDeferAsyncScriptsCount_==e){this.run()}};deferJsNs.DeferJs.prototype["execute"]=deferJsNs.DeferJs.prototype.execute;deferJsNs.DeferJs.prototype.run=function(){if(this.state_!=deferJsNs.DeferJs.STATES.SCRIPTS_REGISTERED){return}if(this.firstIncrementalRun_){this.fireEvent(deferJsNs.DeferJs.EVENT.BEFORE_SCRIPTS)}this.state_=deferJsNs.DeferJs.STATES.SCRIPTS_EXECUTING;this.setUp();this.runNext()};deferJsNs.DeferJs.prototype["run"]=deferJsNs.DeferJs.prototype.run;deferJsNs.DeferJs.prototype.parseHtml=function(e){var t=this.origCreateElement_.call(document,"div");t.innerHTML="<div>_</div>"+e;t.removeChild(t.firstChild);return t};deferJsNs.DeferJs.prototype.disown=function(e){var t=e.parentNode;if(t){t.removeChild(e)}};deferJsNs.DeferJs.prototype.insertNodesBeforeElem=function(e,t){var n=this.nodeListToArray(e);var r=n.length;var i=t.parentNode;for(var s=0;s<r;++s){var o=n[s];this.disown(o);i.insertBefore(o,t)}};deferJsNs.DeferJs.prototype.isJSNode=function(e){if(e.nodeName!="SCRIPT"){return false}if(e.hasAttribute("type")){var t=e.getAttribute("type");return!t||this.jsMimeTypes.indexOf(t)!=-1}else if(e.hasAttribute("language")){var n=e.getAttribute("language");return!n||this.jsMimeTypes.indexOf("text/"+n.toLowerCase())!=-1}return true};deferJsNs.DeferJs.prototype.markNodesAndExtractScriptNodes=function(e,t){if(!e.childNodes){return}var n=this.nodeListToArray(e.childNodes);var r=n.length;for(var i=0;i<r;++i){var s=n[i];if(s.nodeName=="SCRIPT"){if(this.isJSNode(s)){t.push(s);s.setAttribute(deferJsNs.DeferJs.PSA_ORIG_TYPE,s.type);s.setAttribute("type",this.psaScriptType_);s.setAttribute(deferJsNs.DeferJs.PSA_ORIG_SRC,s.src);s.setAttribute("src","");s.setAttribute(this.psaNotProcessed_,"")}}else{this.markNodesAndExtractScriptNodes(s,t)}}};deferJsNs.DeferJs.prototype.deferScripts=function(e,t){var n=e.length;for(var r=0;r<n;++r){this.addNode(e[r],t+r,!!r)}};deferJsNs.DeferJs.prototype.insertHtml=function(e,t,n){var r=this.parseHtml(e);var i=[];this.markNodesAndExtractScriptNodes(r,i);if(n){this.insertNodesBeforeElem(r.childNodes,n)}else{this.log("Unable to insert nodes, no context element found")}this.deferScripts(i,t)};deferJsNs.DeferJs.prototype.handlePendingDocumentWrites=function(){if(this.documentWriteHtml_==""){return}this.log("handle_dw: "+this.documentWriteHtml_);var e=this.documentWriteHtml_;this.documentWriteHtml_="";var t=this.getCurrentDomLocation();this.insertHtml(e,this.next_,t)};deferJsNs.DeferJs.prototype.writeHtml=function(e){if(this.overrideDefaultImplementation_){this.log("dw: "+e);this.documentWriteHtml_+=e}else{this.origDocWrite_.call(document,e)}};deferJsNs.DeferJs.prototype.addDeferredOnloadListeners=function(){var e;if(document.querySelectorAll){e=document.querySelectorAll("["+deferJsNs.DeferJs.PAGESPEED_ONLOAD+"][data-frz-loaded]")}for(var t=0;t<e.length;t++){var n=e.item(t);var r=n.getAttribute(deferJsNs.DeferJs.PAGESPEED_ONLOAD);var i="var psaFunc=function() {"+r+"};";window["eval"].call(window,i);if(typeof window["psaFunc"]!="function"){this.log("Function is not defined",new Error(""));continue}psaAddEventListener(n,"onload",window["psaFunc"])}};deferJsNs.DeferJs.prototype.addBeforeDeferRunFunctions=function(e){psaAddEventListener(window,"onbeforescripts",e)};deferJsNs.DeferJs.prototype["addBeforeDeferRunFunctions"]=deferJsNs.DeferJs.prototype.addBeforeDeferRunFunctions;deferJsNs.DeferJs.prototype.addAfterDeferRunFunctions=function(e){psaAddEventListener(window,"onafterscripts",e)};deferJsNs.DeferJs.prototype["addAfterDeferRunFunctions"]=deferJsNs.DeferJs.prototype.addAfterDeferRunFunctions;deferJsNs.DeferJs.prototype.fireEvent=function(e){this.eventState_=e;this.log("Firing Event: "+e);var t=this.eventListenersMap_[e]||[];for(var n=0;n<t.length;++n){this.exec(t[n])}t.length=0};deferJsNs.DeferJs.prototype.exec=function(e,t){try{e.call(t||window)}catch(n){this.log("Exception while evaluating.",n)}};deferJsNs.DeferJs.prototype.overrideAddEventListeners=function(){var e=this;if(window.addEventListener){document.addEventListener=function(t,n,r){psaAddEventListener(document,t,n,e.origDocAddEventListener_,r)};window.addEventListener=function(t,n,r){psaAddEventListener(window,t,n,e.origWindowAddEventListener_,r)}}else if(window.attachEvent){document.attachEvent=function(t,n){psaAddEventListener(document,t,n,e.origDocAttachEvent_)};window.attachEvent=function(t,n){psaAddEventListener(window,t,n,e.origWindowAttachEvent_)}}};var psaAddEventListener=function(e,t,n,r,i){var s=pagespeed["deferJs"];if(s.state_>=deferJsNs.DeferJs.STATES.WAITING_FOR_ONLOAD){if(r){r.call(e,t,n,i);return}if(s.state_>=deferJsNs.DeferJs.STATES.SCRIPTS_DONE){return}}var o;var u;if(s.eventState_<deferJsNs.DeferJs.EVENT.DOM_READY&&(t=="DOMContentLoaded"||t=="readystatechange"||t=="onDOMContentLoaded"||t=="onreadystatechange")){o=deferJsNs.DeferJs.EVENT.DOM_READY;u="DOMContentLoaded"}else if(s.eventState_<deferJsNs.DeferJs.EVENT.LOAD&&(t=="load"||t=="onload")){o=deferJsNs.DeferJs.EVENT.LOAD;u="load"}else if(t=="onbeforescripts"){o=deferJsNs.DeferJs.EVENT.BEFORE_SCRIPTS}else if(t=="onafterscripts"){o=deferJsNs.DeferJs.EVENT.AFTER_SCRIPTS}else{if(r){r.call(e,t,n,i)}return}var a=function(){var t={};t["bubbles"]=false;t["cancelable"]=false;t["eventPhase"]=2;t["timeStamp"]=(new Date).getTime();t["type"]=u;t["target"]=e!=window?e:document;t["currentTarget"]=e;n.call(e,t)};if(!s.eventListenersMap_[o]){s.eventListenersMap_[o]=[]}s.eventListenersMap_[o].push(a)};deferJsNs.DeferJs.prototype.registerScriptTags=function(e,t){if(this.state_>=deferJsNs.DeferJs.STATES.SCRIPTS_REGISTERED){return}if(e){if(!deferJsNs.DeferJs.isExperimentalMode){e();return}this.lastIncrementalRun_=false;this.incrementalScriptsDoneCallback_=e;if(t){this.optLastIndex_=t}}else{this.lastIncrementalRun_=true}this.state_=deferJsNs.DeferJs.STATES.SCRIPTS_REGISTERED;var n=document.getElementsByTagName("script");var r=n.length;for(var i=0;i<r;++i){var s=this.queue_.length==this.next_;var o=n[i];if(o.getAttribute("type")==this.psaScriptType_){if(e){var u=o.getAttribute(deferJsNs.DeferJs.PSA_ORIG_INDEX);if(u<=this.optLastIndex_){this.addNode(o,undefined,!s)}}else{if(o.getAttribute(deferJsNs.DeferJs.PSA_ORIG_INDEX)<this.optLastIndex_){this.log("Executing a script twice. Orig_Index: "+o.getAttribute(deferJsNs.DeferJs.PSA_ORIG_INDEX),new Error(""))}this.addNode(o,undefined,!s)}}}};deferJsNs.DeferJs.prototype["registerScriptTags"]=deferJsNs.DeferJs.prototype.registerScriptTags;deferJsNs.addOnload=function(e,t){pagespeedutils.addHandler(e,"load",t)};pagespeed["addOnload"]=deferJsNs.addOnload;deferJsNs.DeferJs.prototype.isFireFox=function(){return navigator.userAgent.indexOf("Firefox")!=-1};deferJsNs.DeferJs.prototype.isWebKit=function(){return navigator.userAgent.indexOf("AppleWebKit")!=-1};deferJsNs.DeferJs.prototype.getIEVersion=function(){var e=/(?:MSIE.(\d+\.\d+))/.exec(navigator.userAgent);return e&&e[1]?document.documentMode||parseFloat(e[1]):NaN};deferJsNs.DeferJs.prototype.setType=function(e){this.psaScriptType_=e};deferJsNs.DeferJs.prototype.setPsaNotProcessed=function(e){this.psaNotProcessed_=e};deferJsNs.DeferJs.prototype.isLowPriorityDeferJs=function(){if(this.psaScriptType_==deferJsNs.DeferJs.PSA_SCRIPT_TYPE){return true}return false};deferJsNs.DeferJs.prototype.noDeferCreateElementOverride=function(){var e=this;document.createElement=function(t){var n=e.origCreateElement_.call(document,t);if(e.overrideDefaultImplementation_&&t.toLowerCase()=="script"){e.noDeferAsyncScripts_.push(n);e.noDeferAsyncScriptsCount_++;var r=function(){var t=e.noDeferAsyncScripts_.indexOf(this);if(t!=-1){e.noDeferAsyncScripts_.splice(t,1);e.noDeferAsyncScriptsCount_--;e.execute()}};deferJsNs.addOnload(n,r);pagespeedutils.addHandler(n,"error",r)}return n}};deferJsNs.DeferJs.prototype.isExperimentalMode=function(){return deferJsNs.DeferJs.isExperimentalMode};deferJsNs.DeferJs.prototype["isExperimentalMode"]=deferJsNs.DeferJs.prototype.isExperimentalMode;deferJsNs.deferInit=function(){if(pagespeed["deferJs"]){return}deferJsNs.DeferJs.isExperimentalMode=pagespeed["defer_js_experimental"];pagespeed.highPriorityDeferJs=new deferJsNs.DeferJs;pagespeed.highPriorityDeferJs.setType(deferJsNs.DeferJs.PRIORITY_PSA_SCRIPT_TYPE);pagespeed.highPriorityDeferJs.setPsaNotProcessed(deferJsNs.DeferJs.PRIORITY_PSA_NOT_PROCESSED);pagespeed.highPriorityDeferJs.setNotProcessedAttributeForNodes();pagespeed.lowPriorityDeferJs=new deferJsNs.DeferJs;pagespeed.lowPriorityDeferJs.setType(deferJsNs.DeferJs.PSA_SCRIPT_TYPE);pagespeed.lowPriorityDeferJs.setPsaNotProcessed(deferJsNs.DeferJs.PSA_NOT_PROCESSED);pagespeed.lowPriorityDeferJs.setNotProcessedAttributeForNodes();pagespeed.deferJs=pagespeed.highPriorityDeferJs;pagespeed.deferJs.noDeferCreateElementOverride();pagespeed["deferJs"]=pagespeed.deferJs};deferJsNs.deferInit();pagespeed.deferJsStarted=false;deferJsNs.startDeferJs=function(){if(pagespeed.deferJsStarted||pagespeed["panelLoader"])return;pagespeed.deferJsStarted=true;pagespeed.deferJs.registerScriptTags();pagespeed.deferJs.execute()};deferJsNs["startDeferJs"]=deferJsNs.startDeferJs;pagespeedutils.addHandler(document,"DOMContentLoaded",deferJsNs.startDeferJs);deferJsNs.addOnload(window,deferJsNs.startDeferJs)
